
<style> html, body { margin: 0; padding: 0; } </style>
<canvas id="screen" style="width: 100%; height: 100%;"></canvas>
<script>

const canvas = document.getElementById('screen');
const ctx = canvas.getContext('2d');
//map
const MAP_SIZE = 16;
const MAP_SCALE = 10;
const MAP_RANGE = MAP_SIZE * MAP_SCALE;
const MAP_SPEED = (MAP_SCALE / 2) / 10;
let map = 
	[
		1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
		1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,
		1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,
		1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,
		1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,
		1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,
		1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,
		1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,
		1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,
		1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,
		1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,
		1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,
		1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,
		1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,
		1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,
		1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,

	];

//FPS
const FPS = 60;
const cycleDelay = Math.floor(1000 / FPS);
let oldCycleTime = 0;
let cycleCount = 0;
let fpsRate  = 'calculating...';

//screen
const WIDTH=300, HALF_WIDTH=WIDTH/2;
const HEIGHT=200, HALF_HEIGHT=HEIGHT/2;

let i = 0;
//game looop
function gameLoop() 
{
	//calculate fps

	cycleCount++;
	if (cycleCount >= 60) 
	{
		cycleCount = 0;
	}
	let startTime = Date.now();
	let cycleTime = startTime - oldCycleTime;
	oldCycleTime = startTime;
	if (cycleCount % 60 == 0)
	{
		fpsRate = Math.floor(1000 / cycleTime);
	}

	canvas.width = window.innerWidth * 0.3;
	canvas.height = window.innerHeight  * 0.3;

	// update screen
	ctx.fillStyle = 'white';
	ctx.fillRect(0, 0, canvas.width, canvas.height);
	ctx.fillStyle = 'black';
	ctx.fillRect(canvas.width / 2 - HALF_WIDTH, canvas.height / 2 - HALF_HEIGHT, WIDTH, HEIGHT);


	//draw map
	for (var row = 0; row < MAP_SIZE; row++) 
	{
		for (var col = 0; col < MAP_SIZE; col++) 
		{
			var square = row * MAP_SIZE + col;
			if (map[square] == 1)
			{
				ctx.fillStyle = '#555';
				ctx.fillRect(Math.floor(canvas.width / 2 - MAP_RANGE / 2) + col * MAP_SCALE, Math.floor(canvas.height / 2 - MAP_RANGE / 2) + row * MAP_SCALE, MAP_SCALE, MAP_SCALE);
			}
			else
			{
				ctx.fillStyle = '#aaa';
				ctx.fillRect(Math.floor(canvas.width / 2 - MAP_RANGE / 2) + col * MAP_SCALE, Math.floor(canvas.height / 2 - MAP_RANGE / 2) + row * MAP_SCALE, MAP_SCALE, MAP_SCALE);
			}
		}
	}


	//draw fps
	ctx.fillStyle = 'black';
	ctx.font = '20px Arial';
	ctx.fillText('FPS: ' + fpsRate, 10, 20);


	//infine loop
	setTimeout(gameLoop, cycleDelay);
} window.onload = function () { gameLoop(); }

</script>
